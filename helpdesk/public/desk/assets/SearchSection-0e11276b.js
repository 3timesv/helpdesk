import{T as $}from"./Breadcrumbs-4289cef3.js";import{_ as y,o as s,d as a,a as i,i as c,w as u,k as x,h as p,m as B,b as o,r as d,s as _,P as S,p as T,ca as R,t as g,F as I,e as C,c as F}from"./index-d9377e3a.js";import{L as P}from"./LoadingText-f736f9e5.js";const V={name:"EditableBlock",props:{editable:{type:Boolean,default:!1},editMode:{type:Boolean,default:!1},saveInProgress:{type:Boolean,default:!1},disableSaving:{type:Boolean,default:!1}},components:{TabButtons:$},data(){return{activeTab:"Webview"}},resources:{articles(){this.activeTab=="Articles"&&this.$router.push({path:"/frappedesk/kb/articles"})}}},E={class:"flex flex-col space-y-4"},L={key:0,class:"flex flex-row items-center"},N={key:0},A={key:1,class:"text-base text-gray-700 italic"},K=o("div",{class:"grow"},null,-1),M={key:0,class:"flex flex-row items-center space-x-2"},W={key:1,class:"flex flex-row items-center space-x-2"};function D(e,n,t,k,b,f){const m=d("TabButtons"),h=d("Button");return s(),a("div",E,[t.editable?(s(),a("div",L,[i(e.$slots,"top-left-section",{},()=>[t.editMode?(s(),a("div",A," Editing - Knowledge Base ")):(s(),a("div",N,[c(m,{buttons:[{label:"Articles"},{label:"Webview",active:!0}],modelValue:b.activeTab,"onUpdate:modelValue":n[0]||(n[0]=l=>b.activeTab=l)},null,8,["modelValue"])]))]),K,i(e.$slots,"default"),t.editMode?(s(),a("div",M,[i(e.$slots,"edit-actions",{},()=>[i(e.$slots,"discard-action",{discard:l=>{e.$emit("discard",l)}},()=>[c(h,{"icon-left":"rotate-ccw",onClick:n[1]||(n[1]=l=>e.$emit("discard"))},{default:u(()=>[x(" Discard ")]),_:1})]),i(e.$slots,"save-action",{save:l=>{e.$emit("save",l)},disableSaving:t.disableSaving,saveInProgress:t.saveInProgress},()=>[c(h,{loading:t.saveInProgress,"icon-left":"save",class:p(t.disableSaving?"cursor-not-allowed":""),disable:t.disableSaving,onClick:n[2]||(n[2]=l=>e.$emit("save"))},{default:u(()=>[x(" Save ")]),_:1},8,["loading","class","disable"])]),i(e.$slots,"other-edit-actions")])])):(s(),a("div",W,[i(e.$slots,"main-actions",{},()=>[c(h,{"icon-left":"edit",onClick:n[3]||(n[3]=l=>e.$emit("edit"))},{default:u(()=>[x(" Edit ")]),_:1}),i(e.$slots,"other-main-actions")])]))])):B("",!0),i(e.$slots,"body",{class:"h-full"})])}const se=y(V,[["render",D]]),q={name:"KBSearchSection",props:{isRoot:{type:Boolean,default:!1},disabled:{type:Boolean,default:!0}},components:{FeatherIcon:_,Popover:S,FeatherIcon:_,LoadingText:P},setup(){return{searchText:T("")}},computed:{searchResults(){return this.searchText?this.$resources.searchResults.data||[]:[]}},methods:{onSearch:R(function(e){this.searchText=e,this.$resources.searchResults.submit({text:e})},300)},resources:{searchResults:{url:"frappedesk.api.kb.search"}}},z={class:"container flex flex-col space-y-5 mx-auto"},H={class:"flex flex-col"},U={class:"rounded-xl w-[600px] shadow bg-white h-10 flex flex-row items-center px-3 space-x-3"},j=["onInput","disabled"],G={class:"text-base text-gray-700 shadow rounded bg-white mt-2 max-h-[300px] overflow-y-scroll"},J={key:0},O={class:"flex flex-row space-x-2 items-center"},Q={key:1,class:"p-2 text-gray-500"},X={key:1};function Y(e,n,t,k,b,f){const m=d("FeatherIcon"),h=d("router-link"),l=d("LoadingText"),w=d("Popover");return s(),a("div",{class:p(["bg-gray-100 w-full flex items-center",t.isRoot?"h-[350px]":"h-[236px]"])},[o("div",z,[o("div",{class:p(["text-gray-900 font-semibold",t.isRoot?"text-[52px]":"text-[36px]"])},g(t.isRoot?"How can I help you?":"Knowledge Base"),3),o("div",H,[c(w,null,{target:u(({togglePopover:r})=>[o("div",null,[o("div",U,[c(m,{name:"search",class:"h-4 w-4 stroke-gray-500"}),o("input",{onInput:v=>{v.target.value?(f.onSearch(v.target.value),r(!0)):r(!1)},disabled:t.disabled,type:"text",placeholder:"Write a question or problem",class:"grow text-[12px] text-left text-gray-500 border-0 focus:ring-0"},null,40,j)])])]),body:u(()=>[o("div",G,[f.searchResults.length>0?(s(),a("div",J,[(s(!0),a(I,null,C(f.searchResults,(r,v)=>(s(),a("div",{key:r.name},[c(h,{to:{path:`/support/kb/${r.doctype==="Article"?"articles":"categories"}/${r.name}`},as:"div"},{default:u(()=>[o("div",{class:p(["p-2 hover:bg-gray-50 cursor-pointer",v<f.searchResults.length-1?"border-b":""])},[o("div",O,[c(m,{name:r.doctype==="Article"?"file-text":"folder",class:"h-4 w-4 stroke-gray-500"},null,8,["name"]),o("div",null,g(r.title),1)])],2)]),_:2},1032,["to"])]))),128))])):(s(),a("div",Q,[e.$resources.searchResults.loading?(s(),F(l,{key:0,text:"Searching..."})):(s(),a("div",X,"No Results Found"))]))])]),_:1})])])],2)}const ae=y(q,[["render",Y]]);export{se as E,ae as S};
