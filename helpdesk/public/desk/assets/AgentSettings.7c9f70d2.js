import{_ as m,I as _,i as $,r as l,o,k as c,b as y,w as p,l as t,m as d,t as h,n as v,p as b,y as k,z as N,C,E as D,x as w}from"./vendor.1fecb205.js";const I={name:"AgentListItem",props:["agent"],components:{Input:_,FeatherIcon:$},computed:{agentRoles(){return this.agent&&this.agent.roles?this.agent.roles.join(", "):""}}},V={class:"block py-4 hover:bg-gray-50 border-b text-base"},L={class:"mr-4"},B={class:"sm:w-4/12"},j={class:"sm:w-4/12"},S={class:"sm:w-4/12 truncate"},F={class:"sm:w-4/12 truncate"};function W(a,e,n,r,g,i){const u=l("Input"),s=l("router-link");return o(),c("div",V,[n.agent?(o(),y(s,{key:0,class:"group flex items-center justify-between sm:justify-start font-light pl-4 pr-8 space-x-2",to:`/agents/${n.agent.name}`},{default:p(()=>[t("div",L,[d(u,{type:"checkbox",value:""})]),t("div",B,h(n.agent.agent_name),1),t("div",j,h(n.agent.name),1),t("div",S,h(i.agentRoles),1),t("div",F,h(n.agent.team.name),1)]),_:1},8,["to"])):v("",!0)])}var z=m(I,[["render",W]]);const E={name:"AgentList",inject:["viewportWidth"],props:["agents"],components:{Input:_,AgentListItem:z},computed:{}},R={class:"block px-0"};function U(a,e,n,r,g,i){const u=l("AgentListItem");return o(),c("div",null,[t("div",null,[n.agents?(o(),c("div",{key:0,class:"w-full block overflow-auto",style:b({height:i.viewportWidth>768?"calc(100vh - 7.3rem)":null})},[(o(!0),c(k,null,N(n.agents,s=>(o(),c("div",{class:"flex-auto",key:s.name},[t("div",R,[d(u,{agent:s},null,8,["agent"])])]))),128))],4)):v("",!0)])])}var q=m(E,[["render",U]]);const P={name:"NewAgentDialog",props:{modelValue:{type:Boolean,required:!0}},setup(a,{emit:e}){return{open:C({get:()=>a.modelValue,set:r=>{e("update:modelValue",r),r||e("close")}})}},data(){return{firstName:"",lastName:"",emailId:"",phone:""}},resources:{createContact(){return{method:"frappe.client.insert",onSuccess(a){this.$emit("contactCreated",a)}}}},components:{Input:_,Dialog:D},methods:{createContact(){this.$resources.createContact.submit({doc:{doctype:"Contact",first_name:this.firstName,last_name:this.lastName,email_ids:[{email_id:this.emailId}],phone_nos:[{phone:this.phone}]}})}}},T=t("a",{href:"/app/agent/new",class:"text-base hover:underline text-slate-500 hover:text-slate-700"}," Create Agent from frappe desk ",-1);function G(a,e,n,r,g,i){const u=l("Dialog");return o(),c("div",null,[d(u,{options:{title:"Create New Agent"},modelValue:r.open,"onUpdate:modelValue":e[0]||(e[0]=s=>r.open=s)},{"body-content":p(()=>[T]),_:1},8,["modelValue"])])}var H=m(P,[["render",G]]);const J={name:"AgentSettings",inject:["viewportWidth"],components:{AgentList:q,Input:_,NewAgentDialog:H},data(){return{showNewAgentDialog:!1}},resources:{agents(){return{method:"helpdesk.api.agent.get_all",auto:!0,fields:["name"]}}},activated(){this.$currentPage.set("AgentSettings")},deactivated(){},computed:{agents(){return console.log(this.$resources.agents.data),this.$resources.agents.data||null}},methods:{agentCreated(a){this.$resources.agents.fetch(),this.showNewAgentDialog=!1}}},K={class:"flow-root border-b pt-2 pb-3 pr-8"},M={class:"float-left ml-4"},O={class:"flex items-center space-x-4"},Q=w("Add Agent"),X={class:"float-right"},Y=w("Filter"),Z={key:0};function ee(a,e,n,r,g,i){const u=l("Input"),s=l("Button"),A=l("AgentList"),x=l("NewAgentDialog");return o(),c("div",null,[t("div",K,[t("div",M,[t("div",O,[d(u,{type:"checkbox",value:""}),d(s,{"icon-left":"plus",appearance:"primary",onClick:e[0]||(e[0]=()=>{g.showNewAgentDialog=!0})},{default:p(()=>[Q]),_:1})])]),t("div",X,[d(s,{"icon-left":"filter",type:"white"},{default:p(()=>[Y]),_:1})])]),i.agents?(o(),c("div",Z,[d(A,{agents:i.agents},null,8,["agents"])])):v("",!0),d(x,{modelValue:g.showNewAgentDialog,"onUpdate:modelValue":e[1]||(e[1]=f=>g.showNewAgentDialog=f),onAgentCreated:e[2]||(e[2]=f=>{i.agentCreated(f)})},null,8,["modelValue"])])}var ne=m(J,[["render",ee]]);export{ne as default};
