import{_ as x,aw as y,s as T,p as g,o as i,d,b as t,c as v,m as p,F as I,e as S,i as a,w as h,h as j,t as m,k as b,v as w,r as l}from"./index-d9377e3a.js";import{D as A}from"./Dropdown-e0c50cd3.js";import{C as B}from"./CustomIcons-60888788.js";import"./use-tracked-pointer-4b3ac621.js";import"./use-resolve-button-type-390b11ae.js";const N={name:"TicketList",props:["filter"],components:{Badge:y,FeatherIcon:T,CustomIcons:B},setup(){const e=w("tickets"),s=g("creation"),c=g(!1);return{tickets:e,sortBy:s,sortAscending:c}},computed:{tickets(){if(this.tickets){let e=Object.values(this.tickets).sort((c,r)=>c[this.sortBy]>r[this.sortBy]?1:r[this.sortBy]>c[this.sortBy]?-1:0);this.sortAscending||e.reverse();let s=[];switch(this.filter){case"Open Tickets":s=e.filter(c=>!["Closed","Resolved"].includes(c.status));break;case"Closed Tickets":s=e.filter(c=>["Closed","Resolved"].includes(c.status));break;default:s=e;break}return s}return null}},methods:{getStatus(e){switch(e){case"Replied":return"Waiting For Reply";case"Resolved":return"Closed";default:return e}},getStatusBadgeColor(e){switch(e){case"Replied":return"yellow";case"Resolved":return"red";case"On Hold":return"blue";case"Closed":return"red";case"Open":return"green"}},changeSortBy(e){this.sortBy==e?this.sortAscending=!this.sortAscending:(this.sortBy=e,this.sortAscending=!0)}}},D={class:"px-3 bg-white border rounded-lg shadow"},R={class:"px-1"},$={class:"flex items-center border-b py-4 text-gray-500"},L={class:"sm:w-8/12"},V={class:"flex text-base items-center space-x-1"},E=t("div",null,"Subject",-1),z={class:"sm:w-2/12"},H={class:"flex text-base items-center space-x-1"},W=t("div",null,"Status",-1),q={class:"sm:w-2/12 flow-root"},G={class:"flex items-center space-x-1 text-base"},J=t("div",null,"Created",-1),K={key:0},M={key:0},P={class:"px-1 rounded hover:bg-slate-50 cursor-pointer"},Q={class:"sm:w-8/12 flex space-x-2 pr-2 text-base"},U={class:"truncate"},X={class:"sm:w-2/12"},Y={class:"sm:w-2/12 flow-root text-base"},Z={class:"float-right text-slate-500"},tt={key:1},et={class:"grid place-content-center h-48 w-full"},st=t("div",{class:"text-gray-500 mb-2"},"No tickets found",-1);function ot(e,s,c,r,C,o){const u=l("FeatherIcon"),_=l("Badge"),k=l("router-link"),f=l("CustomIcons");return i(),d("div",D,[t("div",R,[t("div",$,[t("div",L,[t("div",{class:"cursor-pointer w-fit hover:text-gray-700",onClick:s[0]||(s[0]=n=>o.changeSortBy("subject"))},[t("div",V,[E,r.sortBy=="subject"?(i(),v(u,{key:0,name:r.sortAscending?"arrow-up":"arrow-down",class:"w-4 h-4"},null,8,["name"])):p("",!0)])])]),t("div",z,[t("div",{class:"cursor-pointer w-fit hover:text-gray-700",onClick:s[1]||(s[1]=n=>o.changeSortBy("status"))},[t("div",H,[W,r.sortBy=="status"?(i(),v(u,{key:0,name:r.sortAscending?"arrow-up":"arrow-down",class:"w-4 h-4"},null,8,["name"])):p("",!0)])])]),t("div",q,[t("div",{class:"float-right cursor-pointer w-fit hover:text-gray-700",onClick:s[2]||(s[2]=n=>o.changeSortBy("creation"))},[t("div",G,[r.sortBy=="creation"?(i(),v(u,{key:0,name:r.sortAscending?"arrow-up":"arrow-down",class:"w-4 h-4"},null,8,["name"])):p("",!0),J])])])])]),o.tickets?(i(),d("div",K,[o.tickets.length>0?(i(),d("div",M,[(i(!0),d(I,null,S(o.tickets,(n,F,O)=>(i(),d("div",{key:n.name,class:"space-y-4"},[a(k,{to:`/support/tickets/${n.name}`},{default:h(()=>[t("div",P,[t("div",{class:j(["flex items-center py-4",O<Object.keys(o.tickets).length-1?"border-b":""])},[t("div",Q,[t("div",U,m(n.subject),1),t("div",null,m(`#${n.name}`),1)]),t("div",X,[a(_,{class:"text-[12px]",color:o.getStatusBadgeColor(n.status)},{default:h(()=>[b(m(o.getStatus(n.status)),1)]),_:2},1032,["color"])]),t("div",Y,[t("div",Z,m(e.$dayjs.longFormating(e.$dayjs(n.creation).fromNow())),1)])],2)])]),_:2},1032,["to"])]))),128))])):(i(),d("div",tt,[t("div",et,[t("div",null,[a(f,{name:"empty-list",class:"h-12 w-12 mx-auto mb-2"}),st])])]))])):p("",!0)])}const nt=x(N,[["render",ot]]),ct={name:"Tickets",components:{Badge:y,Dropdown:A,TicketList:nt,CustomIcons:B,FeatherIcon:T},setup(){const e=w("tickets"),s=w("ticketTemplates"),c=g("All Tickets");return{tickets:e,ticketTemplates:s,ticketFilter:c}},computed:{tickets(){return this.tickets||null}},methods:{ticketTemplateOptions(){let e=[];return this.ticketTemplates?(this.ticketTemplates.forEach(s=>{e.push({label:s.name,handler:()=>{this.$router.push({name:"TemplatedNewTicket",params:{templateId:s.template_route}})}})}),e):null},openDefaultTicketTemplate(){this.$router.push({name:"DefaultNewTicket"})},getTicketFilterOptions(){let e=[];return["All Tickets","Open Tickets","Closed Tickets"].forEach(s=>{e.push({label:s,handler:()=>{this.ticketFilter=s}})}),e}}},rt={class:"mb-20 mt-5"},it={class:"mx-auto max-w-4xl"},at={class:"flex justify-between items-center mb-2"},lt={class:"mb-2"},dt={class:"flex space-x-2 items-center cursor-pointer"},ut={class:"text-[18px] font-semibold"},mt={class:"space-x-3 items-center flex"};function ht(e,s,c,r,C,o){const u=l("FeatherIcon"),_=l("Dropdown"),k=l("Button"),f=l("TicketList");return i(),d("div",rt,[t("div",it,[t("div",at,[t("div",lt,[a(_,{options:o.getTicketFilterOptions()},{default:h(({toggleTicketFilters:n})=>[t("div",dt,[t("p",ut,m(this.ticketFilter),1),a(u,{name:"chevron-down",class:"w-5 h-5"})])]),_:1},8,["options"])]),t("div",mt,[a(_,{placement:"right",options:o.ticketTemplateOptions().length>1?o.ticketTemplateOptions():[],"dropdown-width-full":!0},{default:h(({toggleTemplates:n})=>[t("div",null,[a(k,{onClick:F=>o.ticketTemplateOptions().length>1?n:o.openDefaultTicketTemplate(),"icon-left":"plus",appearance:"primary"},{default:h(()=>[b(" Create New ")]),_:2},1032,["onClick"])])]),_:1},8,["options"])])]),a(f,{filter:r.ticketFilter},null,8,["filter"])])])}const gt=x(ct,[["render",ht]]);export{gt as default};
