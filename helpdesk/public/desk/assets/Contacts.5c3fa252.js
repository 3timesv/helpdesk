import{_ as p,I as h,i as y,r as a,o as e,k as c,b as x,w as f,l as o,m as r,t as v,n as d,p as N,y as b,z as I,x as w}from"./vendor.1fecb205.js";import{N as $}from"./NewContactDialog.47d79369.js";const D={name:"ContactListItem",props:["contactId"],components:{Input:h,FeatherIcon:y},resources:{contact(){return{method:"frappe.client.get",params:{doctype:"Contact",name:this.contactId},auto:!0}}},computed:{contact(){return this.$resources.contact.data||null},fullName(){if(this.contact)return(this.contact.first_name||"")+" "+(this.contact.last_name||"")}}},L={class:"block py-4 hover:bg-gray-50 border-b text-base"},V={class:"mr-4"},j={class:"sm:w-4/12"},B={class:"sm:w-4/12"},F={key:0},W={class:"sm:w-4/12"},z={key:0};function S(u,n,_,C,l,t){const i=a("Input"),s=a("router-link");return e(),c("div",L,[t.contact?(e(),x(s,{key:0,class:"group flex items-center justify-between sm:justify-start font-light pl-4 pr-8",to:`/contacts/${t.contact.name}`},{default:f(()=>[o("div",V,[r(i,{type:"checkbox",value:""})]),o("div",j,v(t.fullName),1),o("div",B,[t.contact.email_ids.length>0?(e(),c("div",F,v(t.contact.email_ids[0].email_id),1)):d("",!0)]),o("div",W,[t.contact.phone_nos.length>0?(e(),c("div",z,v(t.contact.phone_nos[0].phone),1)):d("",!0)])]),_:1},8,["to"])):d("",!0)])}var A=p(D,[["render",S]]);const E={name:"ContactList",inject:["viewportWidth"],props:["contacts"],components:{Input:h,ContactListItem:A}},P={class:"block px-0"};function T(u,n,_,C,l,t){const i=a("ContactListItem");return e(),c("div",null,[o("div",null,[_.contacts?(e(),c("div",{key:0,class:"w-full block overflow-auto",style:N({height:t.viewportWidth>768?"calc(100vh - 7.3rem)":null})},[(e(!0),c(b,null,I(_.contacts,s=>(e(),c("div",{class:"flex-auto",key:s.name},[o("div",P,[r(i,{contactId:s.name},null,8,["contactId"])])]))),128))],4)):d("",!0)])])}var U=p(E,[["render",T]]);const q={name:"Contacts",inject:["viewportWidth"],components:{ContactList:U,Input:h,NewContactDialog:$},data(){return{showNewContactDialog:!1}},resources:{contacts(){return{method:"helpdesk.api.contact.get_all",auto:!0,fields:["name"]}}},activated(){this.$currentPage.set("Contacts")},deactivated(){},computed:{contacts(){return this.$resources.contacts.data||null}},methods:{contactCreated(u){this.$resources.contacts.fetch(),this.showNewContactDialog=!1}}},G={class:"flow-root border-b pt-2 pb-3 pr-8"},H={class:"float-left ml-4"},J={class:"flex items-center space-x-4"},K=w("Add Contact"),M={class:"float-right"},O=w("Filter"),Q={key:0};function R(u,n,_,C,l,t){const i=a("Input"),s=a("Button"),g=a("ContactList"),k=a("NewContactDialog");return e(),c("div",null,[o("div",G,[o("div",H,[o("div",J,[r(i,{type:"checkbox",value:""}),r(s,{"icon-left":"plus",appearance:"primary",onClick:n[0]||(n[0]=()=>{l.showNewContactDialog=!0})},{default:f(()=>[K]),_:1})])]),o("div",M,[r(s,{"icon-left":"filter",type:"white"},{default:f(()=>[O]),_:1})])]),t.contacts?(e(),c("div",Q,[r(g,{contacts:t.contacts},null,8,["contacts"])])):d("",!0),r(k,{modelValue:l.showNewContactDialog,"onUpdate:modelValue":n[1]||(n[1]=m=>l.showNewContactDialog=m),onContactCreated:n[2]||(n[2]=m=>{t.contactCreated(m)})},null,8,["modelValue"])])}var Z=p(q,[["render",R]]);export{Z as default};
