import{L as h}from"./ListManager-d2a1afc7.js";import{L as V}from"./ListViewer-af42e401.js";import{_ as C,M as y,D,I as k,o as w,d as x,i as s,w as n,b as m,k as g,r as l,t as _}from"./index-d9377e3a.js";import"./Dropdown-e0c50cd3.js";import"./use-tracked-pointer-4b3ac621.js";import"./use-resolve-button-type-390b11ae.js";import"./CustomIcons-60888788.js";import"./listFilters-8ea4c2e9.js";import"./Autocomplete-c752a27e.js";import"./use-controllable-93c8440b.js";import"./CustomSwitch-323f8131.js";import"./ErrorMessage-e4ff6432.js";const N={name:"newCustomerDialog",props:{modelValue:{type:Boolean,required:!0}},setup(a,{emit:e}){return{open:y({get:()=>a.modelValue,set:i=>{e("update:modelValue",i),i||e("close")}})}},components:{Dialog:D,Input:k},data(){return{customer:"",domain:""}},methods:{addCustomer(){const a={customer_name:this.customer,domain:this.domain};this.$resources.newCustomer.submit({doc:{doctype:"HD Customer",...a}})},close(){this.customer="",this.domain="",this.$emit("close")}},resources:{newCustomer(){return{url:"frappe.client.insert",onSuccess:a=>{this.$router.push("/frappedesk/customers")}}}}},v={class:"space-y-4"},b={class:"space-y-1"},L={class:"space-y-1"},B={class:"flex float-right space-x-2"};function $(a,e,f,i,t,c){const u=l("Input"),d=l("Button"),p=l("Dialog");return w(),x("div",null,[s(p,{options:{title:"Add New Customer",size:"sm"},modelValue:i.open,"onUpdate:modelValue":e[3]||(e[3]=r=>i.open=r)},{"body-content":n(()=>[m("div",v,[m("div",b,[s(u,{label:"Customer Name",type:"text",placeholder:"Tesla Inc.",modelValue:t.customer,"onUpdate:modelValue":e[0]||(e[0]=r=>t.customer=r)},null,8,["modelValue"])]),m("div",L,[s(u,{label:"Domain",type:"text",placeholder:"eg: tesla.com, mycompany.com",modelValue:t.domain,"onUpdate:modelValue":e[1]||(e[1]=r=>t.domain=r)},null,8,["modelValue"])]),m("div",B,[s(d,{appearance:"primary",onClick:e[2]||(e[2]=()=>{c.addCustomer(),c.close(),this.$router.go()}),class:"mr-auto"},{default:n(()=>[g("Add")]),_:1})])])]),_:1},8,["modelValue"])])}const I=C(N,[["render",$]]),A={name:"Customers",components:{ListManager:h,ListViewer:V,NewCustomerDialog:I},data(){return{showNewCustomerDialog:!1}}},M={class:"flex flex-col h-full px-4 overflow-hidden"},T={class:"text-[13px] font-inter text-gray-600"},U={class:"text-[13px] font-inter text-gray-600"};function F(a,e,f,i,t,c){const u=l("router-link"),d=l("ListViewer"),p=l("ListManager"),r=l("NewCustomerDialog");return w(),x("div",M,[s(p,{ref:"fdCustomerList",options:{cache:["HD Customer","Desk"],doctype:"HD Customer",urlQueryFilters:!0,saveFiltersLocally:!0,fields:["customer_name","domain","contact_count","ticket_count"],limit:20}},{body:n(()=>[s(d,{options:{name:"Customer",listTitle:"All Customers",base:"12",filterBox:!0,presetFilters:!0,fields:{customer_name:{label:"Name",width:"4"},contact_count:{label:"Contacts",width:"2"},ticket_count:{label:"Tickets",width:"2"}}},class:"text-base h-[100vh] pt-4",onAddItem:e[0]||(e[0]=()=>{t.showNewCustomerDialog=!0})},{"field-customer_name":n(({row:o})=>[s(u,{to:{path:`/frappedesk/customers/${o.name}`},class:"text-[13px] text-gray-600 font-inter hover:text-gray-900"},{default:n(()=>[g(_(`${o.customer_name}`),1)]),_:2},1032,["to"])]),"field-contact_count":n(({row:o})=>[m("div",T,_(o.contact_count),1)]),"field-ticket_count":n(({row:o})=>[m("div",U,_(o.ticket_count),1)]),_:1})]),_:1},512),s(r,{modelValue:t.showNewCustomerDialog,"onUpdate:modelValue":e[1]||(e[1]=o=>t.showNewCustomerDialog=o),onClose:e[2]||(e[2]=()=>{t.showNewCustomerDialog=!1})},null,8,["modelValue"])])}const R=C(A,[["render",F]]);export{R as default};
