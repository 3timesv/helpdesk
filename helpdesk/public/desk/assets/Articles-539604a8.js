import{L as y}from"./ListManager-d2a1afc7.js";import{L as g}from"./ListViewer-af42e401.js";import{C as w}from"./CategorySelector-c2fcec0b.js";import{_ as v,d as C,i as o,w as t,r as i,o as A,b as n,k as c,t as p,h as S}from"./index-d9377e3a.js";import{D as T}from"./Dropdown-e0c50cd3.js";import{T as $}from"./Breadcrumbs-4289cef3.js";import"./CustomIcons-60888788.js";import"./listFilters-8ea4c2e9.js";import"./Autocomplete-c752a27e.js";import"./use-tracked-pointer-4b3ac621.js";import"./use-resolve-button-type-390b11ae.js";import"./use-controllable-93c8440b.js";import"./CustomSwitch-323f8131.js";import"./ErrorMessage-e4ff6432.js";import"./BaseBreadcrumbs-472c50b6.js";const D={name:"Articles",components:{ListManager:y,ListViewer:g,CategorySelector:w,Dropdown:T,TabButtons:$},props:{categoryId:{type:String,default:""}},data(){return{activeTab:"Articles"}},resources:{moveArticlesToCategory(){return{url:"frappedesk.api.kb.move_articles_to_category"}},setStatusForArticles(){return{url:"frappedesk.api.kb.set_status_for_articles"}},deleteArticles(){return{url:"frappedesk.api.kb.delete_articles"}},knowledgeBase(){this.activeTab=="Webview"&&this.$router.push({path:"/frappedesk/kb"})}}},V={class:"flex flex-col"},B={class:"flex flex-row space-x-2"};function L(r,l,x,j,u,M){const m=i("TabButtons"),d=i("Button"),f=i("CategorySelector"),b=i("Dropdown"),_=i("router-link"),k=i("ListViewer"),h=i("ListManager");return A(),C("div",V,[o(h,{ref:"articleList",options:{doctype:"HD Article",order_by:"modified DESC",limit:20}},{body:t(({manager:a})=>[o(k,{options:{fields:{title:{label:"Title",width:"5",priority:1},category_name:{label:"Category",width:"3",priority:1},status:{label:"Status",width:"2",priority:1},views:{label:"Views",width:"1",priority:3},modified:{label:"Modified",width:"1",priority:2,align:"right"}}},class:"h-[calc(100vh-6.5rem)] text-base",onAddItem:l[1]||(l[1]=()=>{r.$router.push("/frappedesk/kb/articles/new")})},{"top-sub-section-1":t(()=>[o(m,{modelValue:u.activeTab,"onUpdate:modelValue":l[0]||(l[0]=e=>u.activeTab=e),buttons:[{label:"Articles",active:!0},{label:"Webview"}]},null,8,["modelValue"])]),"bulk-actions":t(({selectedItems:e})=>[n("div",B,[o(f,{onSelection:s=>{r.$resources.moveArticlesToCategory.submit({articles:Object.keys(e),category:s.name}).then(()=>{a.unselect()})}},{"selector-main":t(({show:s})=>[o(d,{onClick:s},{default:t(()=>[c("Move to")]),_:2},1032,["onClick"])]),_:2},1032,["onSelection"]),o(b,{placement:"right",options:[{label:"Draft",handler:()=>{r.$resources.setStatusForArticles.submit({articles:Object.keys(e),status:"Draft"}).then(()=>{a.unselect()})}},{label:"Published",handler:()=>{r.$resources.setStatusForArticles.submit({articles:Object.keys(e),status:"Published"}).then(()=>{a.unselect()})}}]},{default:t(({toggleDropdown:s})=>[o(d,{loading:r.$resources.setStatusForArticles.loading,"icon-right":"chevron-down",class:"ml-2",onClick:s},{default:t(()=>[c(" Mark as ")]),_:2},1032,["loading","onClick"])]),_:2},1032,["options"]),o(d,{onClick:()=>{r.$resources.deleteArticles.submit({articles:Object.keys(e)}).then(()=>{a.unselect(),a.reload()})}},{default:t(()=>[c("Delete")]),_:2},1032,["onClick"])])]),"field-title":t(({value:e,row:s})=>[o(_,{to:{path:`/frappedesk/kb/articles/${s.name}`},class:"cursor-pointer text-gray-600 hover:text-gray-900"},{default:t(()=>[c(p(e),1)]),_:2},1032,["to"])]),"field-status":t(({value:e})=>[n("div",{class:S(e==="Published"?"text-green-500":"text-gray-500")},p(e),3)]),"field-views":t(({value:e})=>[n("div",null,p(e),1)]),"field-modified":t(({value:e})=>[n("div",null,p(r.$dayjs.shortFormating(r.$dayjs(e).fromNow(),!1)),1)]),_:2},1024)]),_:1},512)])}const X=v(D,[["render",L]]);export{X as default};
