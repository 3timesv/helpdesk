import{_ as R,p as d,v as f,r as p,o as i,d as r,b as l,t as M,i as a,m as w,w as g,h as T,s as C,I as b,k as v,H as _}from"./index-d9377e3a.js";import{T as y,a as N}from"./TextEditor-b1ee2b34.js";const k={name:"ResponseTitleAndMessage",props:["title","message","editable","responseResource"],components:{TextEditor:y,TextEditorFixedMenu:N},mounted(){this.saveResponseTitleAndMessage=this.save},watch:{tempNewTitle(e){this.updateNewResponseInput({field:"title",value:e})},tempNewMessage(e){this.updateNewResponseInput({field:"message",value:e})}},setup(e){const s=d(e.title),n=d(e.message),t=f("editMode"),u=f("updateNewResponseInput"),o=f("saveResponseTitleAndMessage");return{tempNewTitle:s,tempNewMessage:n,editMode:t,updateNewResponseInput:u,saveResponseTitleAndMessage:o}},computed:{textEditorMenuButtons(){return["Paragraph",["Heading 2","Heading 3","Heading 4","Heading 5","Heading 6"],"Separator","Bold","Italic","Separator","Bullet List","Numbered List","Separator","Align Left","Align Center","Align Right","Separator","Image","Video","Link","Blockquote","Code","Horizontal Rule",["InsertTable","AddColumnBefore","AddColumnAfter","DeleteColumn","AddRowBefore","AddRowAfter","DeleteRow","MergeCells","SplitCell","ToggleHeaderColumn","ToggleHeaderRow","ToggleHeaderCell","DeleteTable"],"Separator","Undo","Redo"]}},methods:{save(){this.responseResource.setValue.submit({title:this.tempNewTitle,message:this.tempNewMessage}),this.editMode=!1}}},I={key:0,class:"flex flex-col space-y-[16px] rounded-[8px] border shadow-sm p-[32px]"},A={class:"font-semibold text-[24px] prose prose-p:my-1 border-b pb-[16px] mb-[10px]"},V=["innerHTML"],$={key:1},B={class:"flex flex-col space-y-[16px] h-full"},E={class:"flex flex-col"},H={key:0,class:"mb-2 block text-sm leading-4 text-gray-700"},F={key:0};function D(e,s,n,t,u,o){const m=p("Input"),h=p("TextEditorFixedMenu"),c=p("TextEditor");return i(),r("div",null,[n.editable?(i(),r("div",$,[l("div",B,[l("div",null,[a(m,{label:"Title",type:"text",value:n.title,onInput:s[0]||(s[0]=x=>{t.tempNewTitle=x})},null,8,["value"])]),l("div",E,[t.editMode?(i(),r("div",H," Message ")):w("",!0),a(c,{class:T(t.editMode?"bg-gray-100":""),ref:"textEditor","editor-class":n.editable?t.editMode?"min-h-[20rem] overflow-y-auto max-h-[73vh] px-3 max-w-full":"min-h-[20rem] overflow-y-auto max-h-[85vh]":"flex flex-col",content:n.message,"starterkit-options":{heading:{levels:[2,3,4,5,6]}},onChange:s[1]||(s[1]=x=>{t.tempNewMessage=x}),editable:t.editMode},{top:g(()=>[t.editMode?(i(),r("div",F,[a(h,{class:"m-3 overflow-x-auto",buttons:o.textEditorMenuButtons},null,8,["buttons"])])):w("",!0)]),_:1},8,["class","editor-class","content","editable"])])])])):(i(),r("div",I,[l("div",A,M(n.title),1),l("div",{class:"overflow-y-auto",style:{"min-height":"calc(100vh - 500px)","max-height":"calc(100vh - 245px)"},innerHTML:n.message},null,8,V)]))])}const S=R(k,[["render",D]]),L={name:"CannedResponseInfo",props:["canned_response"],components:{FeatherIcon:C,Input:b,ResponseTitleAndMessage:S},setup(e){const s=d(!1),n=d({}),t=d(c=>{n.value[c.field]=c.value});_("updateNewResponseInput",t),_("newResponseTempValues",n);const u=d(()=>{});_("saveResponseTitleAndMessage",u);const o=d(""),m=d(!1),h=d(!e.canned_response);return _("editMode",h),{editingName:s,tempCannedResponseName:o,updatingValues:m,editMode:h,newResponseTempValues:n,saveResponseTitleAndMessage:u}},computed:{cannedResponseDoc(){return this.$resources.cannedResponse.doc||null},values(){return this.updatingValues?this.values||null:{cannedResponseName:this.cannedResponseDoc?.title||null,message:this.cannedResponseDoc?.message||null}}},deactivated(){this.resetForm()},resources:{cannedResponse(){return{type:"document",doctype:"HD Canned Response",name:this.canned_response,setValue:{onSuccess:()=>{this.$toast({title:"Canned Response Updated.",icon:"check",iconClasses:"text-green-500"})},onError:e=>{this.$toast({title:"Error while updating canned response",text:e,icon:"x",iconClasses:"text-red-500"})}}}}},methods:{resetForm(){this.editingName=!1,this.tempCannedResponseName=this.values.cannedResponseName},save(){this.updatingValues=!0;const e=this.values;this.$resources.user.setValue.submit({title:e.title,message:e.message}).then(()=>{this.$resources.cannedResponse.setValue.submit({title:this.tempCannedResponseName})})},saveResponse(){const e={title:this.newResponseTempValues.title,message:this.newResponseTempValues.message};this.$resources.cannedResponse.setValue.submit({...e}),this.editMode=!1},cancel(){this.$router.go()}}},z={class:"min-w-[490px] px-[24px] py-[10px]"},P={class:"shrink-0 h-[72px] py-[22px] flow-root px-[16px]"},U={class:"float-left"},j=l("div",null,"Back to response list",-1),q={class:"float-right"},G={key:0,class:"flex flex-row space-x-2"},J={key:1,class:"flex flex-row space-x-2"},K={class:"flex flex-row space-x-[24px] h-full border-t px-[16px] py-[22px]"};function O(e,s,n,t,u,o){const m=p("FeatherIcon"),h=p("router-link"),c=p("Button"),x=p("ResponseTitleAndMessage");return i(),r("div",z,[l("div",P,[l("div",U,[a(h,{to:"/frappedesk/settings/canned_response",class:"my-1 text-[12px] text-gray-600 stroke-gray-600 flex flex-row items-center space-x-1 hover:text-gray-700 hover:stroke-gray-700 select-none",role:"button"},{default:g(()=>[a(m,{name:"arrow-left",class:"w-[13px] h-[13px]"}),j]),_:1})]),l("div",q,[t.editMode?(i(),r("div",J,[a(c,{appearance:"secondary",onClick:s[1]||(s[1]=()=>{this.$router.go()})},{default:g(()=>[v(" Cancel ")]),_:1}),a(c,{appearance:"primary",onClick:s[2]||(s[2]=Z=>o.saveResponse())},{default:g(()=>[v(" Save ")]),_:1})])):(i(),r("div",G,[a(c,{appearance:"secondary",onClick:s[0]||(s[0]=()=>{t.editMode=!0,e.newAResponseTempValues={title:o.cannedResponseDoc.title,message:o.cannedResponseDoc.message}})},{default:g(()=>[v("Edit")]),_:1})]))])]),l("div",K,[a(x,{class:"grow",title:o.values?.cannedResponseName,message:o.values?.message,editable:t.editMode,responseResource:e.$resources.cannedResponse},null,8,["title","message","editable","responseResource"])])])}const Q=R(L,[["render",O]]),W={name:"CannedResponse",props:["canned_responseId"],components:{CannedResponseInfo:Q},setup(){},mounted(){this.$event.emit("set-selected-setting","Canned Responses"),this.$event.emit("show-top-panel-actions-settings","CannedResponse")}},X={class:"flex flex-col"};function Y(e,s,n,t,u,o){const m=p("CannedResponseInfo");return i(),r("div",X,[a(m,{class:"shrink-0 border-r border-[#F4F5F6]",canned_response:n.canned_responseId},null,8,["canned_response"])])}const te=R(W,[["render",Y]]);export{te as default};
