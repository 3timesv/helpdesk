import{u as $,G as F,ap as R,ao as a}from"./index-d9377e3a.js";function g(){const n=F(),l=R(),c=$();function i(){const{q:e}=n.query;return a.isEmpty(e)?[]:Array.isArray(e)?[]:decodeURI(e).split("+").map(t=>decodeURIComponent(t)).map(t=>{const r=t.split(":"),u=r.shift(),s=r.shift(),v=r.shift();return{fieldname:u,filter_type:s,value:v}}).map(_)}function f(e){return e.map(t=>`${t.fieldname}:${t.filter_type}:${t.value}`).map(t=>encodeURIComponent(t)).join("+")}function o(e){return e.reduce((t,r)=>{const u=y(r),s=m(r);return t[r.fieldname]=[u,s],t},{})}function p(){const e=i();return o(e)}function y(e){switch(e.fieldname==="_assign"&&(e.filter_type==="is"&&(e.filter_type="like"),e.filter_type==="is not"&&(e.filter_type="not like")),e.filter_type){case"is":return"=";case"is not":return"!=";case"before":return"<";case"after":return">";default:return e.filter_type}}function m(e){e.value=e.value==="@me"?d():e.value;const t=e.value;switch(e.filter_type){case"like":return`%${t}%`;case"not like":return`%${t}%`;default:return t}}function d(){return c.userId}function _(e){return e.label=a.startCase(e.fieldname),e.fieldname==="_assign"&&(e.label="Assigned To"),e}function h(){const{sortBy:e,sortDirection:t="desc"}=n.query;if(e)return`${e} ${t}`}function q(e){l.push({query:{...n.query,q:e}})}return{applyQuery:q,fromQuery:i,queryFilters:p,queryOrderBy:h,toFrappeFilter:o,toQuery:f}}export{g as u};
